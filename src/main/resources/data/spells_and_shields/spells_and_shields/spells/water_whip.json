{
  "icon": {
    "type": "spells_and_shields:default",
    "texture": "spells_and_shields:textures/spell/water_whip.png"
  },
  "mana_cost": 5.0,
  "parameters": [
    {
      "type": "spells_and_shields:double",
      "value": 10.0,
      "var/name": "damage"
    }
  ],
  "spell_actions": [
    {
      "type": "spells_and_shields:simple_mana_check",
      "activation": "active",
      "t/target": "owner"
    },
    {
      "type": "spells_and_shields:mainhand_item_target",
      "activation": "active",
      "t/source": "owner",
      "td/item": "item"
    },
    {
      "type": "spells_and_shields:item_equals_activation",
      "a/to_activate": "shoot",
      "activation": "active",
      "d/boolean/ignore_tag": true,
      "d/int/minimum_count": 1,
      "d/int/minimum_durability": -1,
      "item": {
        "Count": 1,
        "id": "minecraft:water_bucket"
      },
      "t/target": "item"
    },
    {
      "type": "spells_and_shields:activate",
      "a/to_activate": "offhand",
      "activation": "active"
    },
    {
      "type": "spells_and_shields:deactivate",
      "a/to_deactivate": "offhand",
      "activation": "shoot"
    },
    {
      "type": "spells_and_shields:clear_targets",
      "activation": "offhand",
      "td/destination": "item"
    },
    {
      "type": "spells_and_shields:offhand_item_target",
      "activation": "offhand",
      "t/source": "owner",
      "td/item": "item"
    },
    {
      "type": "spells_and_shields:item_equals_activation",
      "a/to_activate": "shoot",
      "activation": "offhand",
      "d/boolean/ignore_tag": true,
      "d/int/minimum_count": 1,
      "d/int/minimum_durability": -1,
      "item": {
        "Count": 1,
        "id": "minecraft:water_bucket"
      },
      "t/target": "item"
    },
    {
      "type": "spells_and_shields:get_item_attributes",
      "activation": "shoot",
      "t/source": "item",
      "var/amount": "amount",
      "var/compound_tag": "item_tag",
      "var/damage": "damage",
      "var/item": "item"
    },
    {
      "type": "spells_and_shields:override_item",
      "activation": "shoot",
      "d/compound_tag/tag": "<<item_tag>>",
      "d/int/amount": "<<amount>>",
      "d/int/damage": "<<damage>>",
      "d/string/item": "minecraft:bucket",
      "t/target": "item"
    },
    {
      "type": "spells_and_shields:get_entity_uuid",
      "activation": "shoot",
      "t/source": "owner",
      "var/uuid": "owner_uuid_return"
    },
    {
      "type": "spells_and_shields:put_compound_tag",
      "activation": "shoot",
      "d/tag/source": {},
      "var/result": "tag"
    },
    {
      "type": "spells_and_shields:put_compound_tag",
      "activation": "shoot",
      "d/tag/source": "<< put_nbt_uuid(tag, 'owner_uuid_return', owner_uuid_return) >>",
      "var/result": "tag"
    },
    {
      "type": "spells_and_shields:shoot",
      "a/block_hit_activation": "on_block_hit",
      "a/entity_hit_activation": "on_entity_hit",
      "a/timeout_activation": "on_timeout",
      "activation": "shoot",
      "d/double/inaccuracy": 0.0,
      "d/double/velocity": 1.0,
      "d/int/timeout": 100,
      "t/source": "owner",
      "td/projectile": "projectile"
    },
    {
      "type": "spells_and_shields:apply_entity_extra_tag",
      "activation": "shoot",
      "d/compound_tag/tag": "<<tag>>",
      "ts/targets": "projectile"
    },
    {
      "type": "spells_and_shields:play_sound",
      "activation": "shoot",
      "d/double/pitch": 1.0,
      "d/double/volume": 1.0,
      "sound_event": "minecraft:item.bucket.empty",
      "ts/targets": "owner"
    },
    {
      "type": "spells_and_shields:damage",
      "activation": "on_entity_hit",
      "d/double/damage": 10.0,
      "ts/targets": "entity_hit"
    },
    {
      "type": "spells_and_shields:copy_targets",
      "activation": "on_entity_hit",
      "td/destination": "position",
      "ts/source": "hit_position"
    },
    {
      "type": "spells_and_shields:activate",
      "a/to_activate": "return",
      "activation": "on_entity_hit"
    },
    {
      "type": "spells_and_shields:copy_targets",
      "activation": "on_block_hit",
      "td/destination": "position",
      "ts/source": "hit_position"
    },
    {
      "type": "spells_and_shields:activate",
      "a/to_activate": "return",
      "activation": "on_block_hit"
    },
    {
      "type": "spells_and_shields:copy_targets",
      "activation": "on_timeout",
      "td/destination": "position",
      "ts/source": "projectile"
    },
    {
      "type": "spells_and_shields:activate",
      "a/to_activate": "return",
      "activation": "on_timeout"
    },
    {
      "type": "spells_and_shields:get_entity_extra_tag",
      "activation": "return",
      "t/source": "projectile",
      "var/compound_tag": "tag"
    },
    {
      "type": "spells_and_shields:entity_uuid_target",
      "activation": "return",
      "d/string/uuid": "<< get_nbt_uuid(tag, 'owner_uuid_return') >>",
      "td/destination": "return_target"
    },
    {
      "type": "spells_and_shields:home",
      "a/block_hit_activation": "dummy_block_hit",
      "a/entity_hit_activation": "on_entity_hit_return",
      "a/timeout_activation": "dummy_timeout",
      "activation": "return",
      "d/double/velocity": 1.0,
      "d/int/timeout": 100,
      "t/source": "position",
      "td/projectile": "projectile",
      "ts/targets": "return_target"
    },
    {
      "type": "spells_and_shields:type_filter",
      "activation": "on_entity_hit_return",
      "target_type": "spells_and_shields:player",
      "td/destination": "return_player",
      "ts/source": "entity_hit"
    },
    {
      "type": "spells_and_shields:get_target_group_size",
      "activation": "on_entity_hit_return",
      "td/source": "return_player",
      "var/result": "count"
    },
    {
      "type": "spells_and_shields:boolean_activation",
      "a/to_activate": "refill",
      "activation": "on_entity_hit_return",
      "d/boolean/activate_if_true": true,
      "d/boolean/deactivate_if_false": true,
      "d/boolean/input": "<< count == 1 >>"
    },
    {
      "type": "spells_and_shields:mainhand_item_target",
      "activation": "refill",
      "t/source": "return_player",
      "td/item": "item"
    },
    {
      "type": "spells_and_shields:item_equals_activation",
      "a/to_activate": "do_refill",
      "activation": "refill",
      "d/boolean/ignore_tag": true,
      "d/int/minimum_count": 1,
      "d/int/minimum_durability": -1,
      "item": {
        "Count": 1,
        "id": "minecraft:bucket"
      },
      "t/target": "item"
    },
    {
      "type": "spells_and_shields:activate",
      "a/to_activate": "refill_offhand",
      "activation": "refill"
    },
    {
      "type": "spells_and_shields:deactivate",
      "a/to_deactivate": "refill_offhand",
      "activation": "do_refill"
    },
    {
      "type": "spells_and_shields:clear_targets",
      "activation": "refill_offhand",
      "td/destination": "item"
    },
    {
      "type": "spells_and_shields:offhand_item_target",
      "activation": "refill_offhand",
      "t/source": "return_player",
      "td/item": "item"
    },
    {
      "type": "spells_and_shields:item_equals_activation",
      "a/to_activate": "do_refill",
      "activation": "refill_offhand",
      "d/boolean/ignore_tag": true,
      "d/int/minimum_count": 1,
      "d/int/minimum_durability": -1,
      "item": {
        "Count": 1,
        "id": "minecraft:bucket"
      },
      "t/target": "item"
    },
    {
      "type": "spells_and_shields:get_item_attributes",
      "activation": "do_refill",
      "t/source": "item",
      "var/amount": "amount",
      "var/compound_tag": "item_tag",
      "var/damage": "damage",
      "var/item": "item"
    },
    {
      "type": "spells_and_shields:override_item",
      "activation": "do_refill",
      "d/compound_tag/tag": "<<item_tag>>",
      "d/int/amount": 1,
      "d/int/damage": "<<amount>>",
      "d/string/item": "minecraft:water_bucket",
      "t/target": "item"
    },
    {
      "type": "spells_and_shields:give_item",
      "activation": "do_refill",
      "d/compound_tag/tag": "<<item_tag>>",
      "d/int/amount": "<< amount - 1 >>",
      "d/int/damage": "<<amount>>",
      "item": "minecraft:bucket",
      "ts/targets": "item"
    },
    {
      "type": "spells_and_shields:play_sound",
      "activation": "do_refill",
      "d/double/pitch": 1.0,
      "d/double/volume": 1.0,
      "sound_event": "minecraft:item.bucket.fill",
      "ts/targets": "owner"
    }
  ],
  "title": {
    "translate": "spell.spells_and_shields.water_whip"
  },
  "tooltip": [
    {
      "translate": "spell.spells_and_shields.water_whip.desc"
    }
  ]
}